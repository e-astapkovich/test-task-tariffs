# Тестовое задание.

[Ссылка на исходное задание](https://github.com/intersvyaz/test/blob/master/readme_php.md)

#### Как развернуть проект:

*Проект написан на Yii2.*
*Используется база данных SQLite.*
*Для запуска проекта нужен Docker,*
*т.к. PHP-FPM и Nginx запускаются в контейнерах.*

- клонировать репозиторий на локальный компьютер
`git clone git@github.com:e-astapkovich/test-task-tariffs.git`
- при необходимости настроить порт, на котором будет запускаться приложение.
Сейчас указан порт 6543
Настраивается в файле "docker-compose.yml", в разделе "services.webserver.ports"
- развернуть docker-контейнеры
`docker-compose up -d`
- установить backend-зависимости
`composer update`
Если composer установлен глобально, то команду можно выполнить, находясь в корневой папке проекта.
Иначе, нужно зайти в контейнер "php-fpm" и выполнить команду внутри него.
___
- На этом этапе приложение уже готово к работе.
т.к. файл с базой данных (заполненной тестовыми данными) включен в репозиторий.
приложение будет работать по url:
http://localhost:6543/
> [!IMPORTANT]
> Если вы меняли в настройках порт, то не забудьте прописать его в url.
- В приложении есть миграция для создания таблицы БД.
При необходимости, её можно запустить командой
`php yii migrate`
- Также в корне репозитория есть файл "tariffs_example.sql".
С помощью этого скрипта можно заполнить БД изначальными тестовыми данными.

#### О проекте

Для начала работы необходимо залогиниться,
т.к. доступ к админ-панели есть только у залогиненных пользователей.
В приложении прописаны три тестовых пользователя
- логин: admin, пароль: admin
- логин: demo, пароль: demo
- логин: user-1, пароль: user-1
(регистрация не предусмотрена)

Залогиненным пользователям доступна админка по адресу:
http://localhost:6543/admin/tariff

На этой странице, в виде таблицы представлены тарифы, имеющиеся в БД.
Реализованы CRUD-операции.
- можно добавить новый тариф (кнопка "Добавить новый тариф")
- можно удалить тариф (кнопка "Удалить")
- можно отредактировать тариф (зелёная кнопка "Редактировать")
Откроется новая страница с формой редактирования.
Перечисленные выше операции работают синхронно.
- Также реализовано редактирование скорости тарифа посредством AJAX прямо в таблице с тарифами.
По нажатию кнопки "редактировать скорость":
1) поле со значением скорости становится редактируемым
2) появляется кнопка сохранить
По нажатию этой кнопки, отправляется асинхронный запрос на сервер с новым значение скорости.
